# テストについて

このプロジェクトには包括的なテストスイートが含まれています。

## テストの実行

```bash
npm test
```

## テストファイル構成

### 1. `src/sudokuUtils.ts`
数学ロジック関数を外部ファイルに抽出したユーティリティモジュール。

### 2. `src/sudokuUtils.test.ts` 
数学ロジックのテストスイート（52個のテスト）

- **calcPlaces**: マス目の文字列配列をPlace オブジェクトに変換
  - 空のマス目が9つの候補を持つことを確認
  - 数字が入ったマス目が値を持つことを確認
  - rowIndex と colIndex が正しく設定されることを確認

- **createConditions**: 行・列・ブロックの制約条件を作成
  - 27個の条件（9行 + 9列 + 9ブロック）を作成
  - 各行、列、ブロックが正しく構築されることを確認

- **updateCandidatesForPlaceValue**: 配置された値に基づいて候補を削除
  - 同じ行の他のマス目から候補を削除することを確認
  - 他の候補は保持されることを確認

- **checkPrediction**: マス目が候補を1つだけ持つ場合を検出
  - 候補が1つのマス目を検出
  - 候補が複数のマス目は検出されないことを確認

- **checkUniqueCandidate**: 1つのマス目にのみ존在する候補を検出
  - ユニークな候補を検出
  - 複数のマス目に存在する候補は検出されないことを確認

- **calcPrediction**: メインの数独ソルバーロジック
  - 空のボードからnullを返すことを確認
  - 簡単な配置を検出
  - 複雑なシナリオで予測を見つけることを確認

### 3. `src/components.test.tsx`
Reactコンポーネントのテストスイート（52個のテスト）

- **Square Component**: 個別のマス目を表すボタン
  - 値の表示、クリックイベント、クラス名などのテスト

- **NumberSelector Component**: 1〜9の数字を選択するセレクター
  - 10個のボタン（空白 + 1〜9）をレンダリング
  - 選択状態の管理
  - クリックイベントの処理

- **HistoryView Component**: 手の履歴を表示するコンポーネント
  - 履歴アイテムの表示
  - 複数タイなる履歴の管理
  - 履歴の順序の保持

- **Action Buttons**: Save、Load、Clear ボタン
  - 各ボタンのレンダリング
  - クリックイベントの処理

- **NextPrediction Component**: 次の推奨手を表示するコンポーネント
  - ボタンのレンダリング
  - 予測テキストの表示
  - クリックイベントの処理

## テスト戦略

このテストスイートは以下の戦略に基づいて設計されています：

1. **ユニットテスト**: 個別の関数とコンポーネントのテスト
2. **統合テスト**: 複数の関数を組み合わせたテスト
3. **実装テスト**: ユーザーの視点からのテスト

## テストの実行結果

```
Test Suites: 2 passed, 2 total
Tests:       52 passed, 52 total
Snapshots:   0 total
Time:        0.846 s
```

## 今後の拡張

さらに詳細なテストを追加する場合：

1. Board コンポーネントのテスト
2. Game コンポーネントの統合テスト
3. localStorage の機能テスト
4. エッジケースのテスト
5. スナップショットテスト
