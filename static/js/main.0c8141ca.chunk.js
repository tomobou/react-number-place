(this.webpackJsonptomobou=this.webpackJsonptomobou||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n(11),i=n(10),c=n(2),s=n(3),u=n(4),o=n(5),l=n(1),d=n.n(l),f=n(14),h=n.n(f),v=(n(20),n(0)),j=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(v.jsx)("button",{className:"square",onClick:this.props.onClick,children:this.props.value})}}]),n}(d.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"renderBoardRow",value:function(e,t){return Object(v.jsxs)("div",{className:"board-row",children:[this.renderBlock(e,t),this.renderBlock(e,t+3),this.renderBlock(e,t+6)]})}},{key:"renderBlock",value:function(e,t){return Object(v.jsxs)("div",{className:"board-block",children:[this.renderBlockRow(e,t),this.renderBlockRow(e+1,t),this.renderBlockRow(e+2,t)]})}},{key:"renderBlockRow",value:function(e,t){return Object(v.jsxs)("div",{className:"block-row",children:[this.renderSquare(e,t),this.renderSquare(e,t+1),this.renderSquare(e,t+2)]})}},{key:"renderSquare",value:function(e,t){var n=this;return Object(v.jsx)(j,{value:this.props.squares[e][t],onClick:function(){return n.props.onClick(e,t)}})}},{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"board-top",children:[this.renderBoardRow(0,0),this.renderBoardRow(3,0),this.renderBoardRow(6,0)]})})}}]),n}(d.a.Component);function p(e){return e.map((function(e,t){return e.map((function(e,n){return{value:"1"<=e&&e<="9"?Number(e):null,candidates:"1"<=e&&e<="9"?[]:Array.from({length:9},(function(e,t){return t+1})),rowIndex:t,colIndex:n}}))}))}function y(e){var t=p(e),n=C(t);x(n);var r=k(t,"UNIQUE_PLACE");return null!=r?r:(O(n),null!=(r=k(t,"OVERLAP_CONDITIONS"))?r:(r=function(e){var t,n=Object(i.a)(e);try{var r=function(){var e=t.value,n=new Map;e.forEach((function(e,t){return e.candidates.forEach((function(e){null!=n.get(e)?n.set(e,-1):n.set(e,t)})),n}));for(var r=0,i=Object(a.a)(n.entries());r<i.length;r++){var c=i[r],s=c[0],u=c[1];if(null!=u&&-1!==u){var o=e[u];return o.candidates=[s],{v:m("UNIQUE_CANDIDATE",o.rowIndex,o.colIndex,o.candidates[0])}}}};for(n.s();!(t=n.n()).done;){var c=r();if("object"===typeof c)return c.v}}catch(s){n.e(s)}finally{n.f()}return null}(n),null!=r?r:(console.log(t),console.log(n),null)))}function O(e){var t,n=Object(i.a)(e.slice(18));try{for(n.s();!(t=n.n()).done;){var c,s=t.value,u=Object(i.a)(e.slice(0,18));try{var o=function(){var e=c.value,t=s.filter((function(t){return e.includes(t)}));if(t.length>0)for(var n=Object(r.a)(Set,Object(a.a)(t.map((function(e){return e.candidates})))),i=function(){var n=o[u],r=s.filter((function(e){return!t.includes(e)&&e.candidates.includes(n)})).length,a=e.filter((function(e){return!t.includes(e)&&e.candidates.includes(n)})).length;r>0&&0===a?s.filter((function(e){return!t.includes(e)})).forEach((function(e){return e.candidates=e.candidates.filter((function(e){return e!==n}))})):0===r&&a>0&&e.filter((function(e){return!t.includes(e)})).forEach((function(e){return e.candidates=e.candidates.filter((function(e){return e!==n}))}))},u=0,o=Object(a.a)(n.values());u<o.length;u++)i()};for(u.s();!(c=u.n()).done;)o()}catch(l){u.e(l)}finally{u.f()}}}catch(l){n.e(l)}finally{n.f()}return e}function k(e,t){for(var n=0;n<9;n++)for(var r=0;r<9;r++){var a=e[n][r].candidates;if(1===e[n][r].candidates.length)return m(t,n,r,a[0])}return null}function m(e,t,n,r){return{type:e,row:t,col:n,value:r}}function x(e){return e.forEach((function(e){var t=e.filter((function(e){return null!==e.value})).map((function(e){return e.value}));e.forEach((function(e){e.candidates=e.candidates.filter((function(e){return!t.some((function(t){return e===t}))}))}))})),e}function C(e){var t=Array(27),n=0;e.forEach((function(e){t[n++]=e}));for(var r=function(r){t[n++]=e.map((function(e){return e[r]}))},a=0;a<9;a++)r(a);for(var i=0;i<9;i+=3)for(var c=0;c<9;c+=3)t[n++]=[e[i][c],e[i][c+1],e[i][c+2],e[i+1][c],e[i+1][c+1],e[i+1][c+2],e[i+2][c],e[i+2][c+1],e[i+2][c+2]];return t}function S(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"next-prediction",onClick:e.onClick,children:"next"}),Object(v.jsx)("span",{className:"next-prediction-text",children:e.predictText})]})}function g(e){return Object(v.jsx)("button",{className:"save",onClick:e.onClick,children:"save"})}function N(e){return Object(v.jsx)("button",{className:"load",onClick:e.onClick,children:"load"})}function q(e){return Object(v.jsx)("button",{className:"clear",onClick:e.onClick,children:"clear"})}var w=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=parseInt(this.props.selectValue,10),n=Array(10).fill("number-selector");return isNaN(t)||t<=0||t>=10?n[0]+=" selected":n[t]+=" selected",Object(v.jsx)("div",{className:"number-selector-row",children:n.map((function(t,n){var r=0===n?" ":n.toString();return Object(v.jsx)("button",{className:t,onClick:function(){return e.props.onClick(r)},children:r},"number-selector-"+n)}))})}}]),n}(d.a.Component),A=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.history.map((function(e){return Object(v.jsx)("div",{children:e})}));return Object(v.jsx)("div",{className:"history-view",children:e})}}]),n}(d.a.Component),E=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={squares:Array(9).fill(null).map((function(e){return Array(9).fill(null)})),selectValue:" ",predictText:"",history:[],candidatesList:Array(9).fill(null).map((function(e){return Array(9).fill(null)}))},r}return Object(s.a)(n,[{key:"getPredictionTypeMessage",value:function(e){switch(e){case"UNIQUE_PLACE":return"\u5024\u78ba\u5b9a";case"OVERLAP_CONDITIONS":return"\u91cd\u8907\u6392\u9664\u5024\u78ba\u5b9a";case"UNIQUE_CANDIDATE":return"\u6761\u4ef6\u78ba\u5b9a";default:return e}}},{key:"getSetValueHistoryPrediction",value:function(e){return this.getSetValueHistoryMessage(e.row,e.col,e.value.toString(),this.getPredictionTypeMessage(e.type))}},{key:"getSetValueHistoryMessage",value:function(e,t,n,r){return"[\u2193"+(e+1)+"][\u2192"+(t+1)+"]\uff1d"+n+"("+r+")"}},{key:"clearHistory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];""!==e&&t.push(e),this.setState((function(e){return{history:t}}))}},{key:"addHistory",value:function(e){var t=this.state.history;t.push(e),this.setState((function(e){return{history:t}}))}},{key:"handleClick",value:function(e,t){var n=this.state.squares.slice();n[e][t]=this.state.selectValue,this.setState((function(e){return{squares:n}})),this.addHistory(this.getSetValueHistoryMessage(e,t,this.state.selectValue,"\u30e6\u30fc\u30b6\u30fc"))}},{key:"handleSelect",value:function(e){this.setState((function(t){return{selectValue:e}}))}},{key:"handleNextPrediction",value:function(){var e=y(this.state.squares);if(null!=e){var t=this.state.squares,n="["+(e.row+1)+"]\u884c["+(e.col+1)+"]\u5217\u76ee\u306f"+e.value+"\u3067\u3059\u3002";t[e.row][e.col]=e.value.toString(),this.setState((function(e){return{squares:t,predictText:n}})),this.addHistory(this.getSetValueHistoryPrediction(e))}else this.setState((function(e){return{predictText:"\u6b21\u306e\u5019\u88dc\u306f\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"}}))}},{key:"handleSaveSquares",value:function(){console.log(this.state.squares),localStorage.setItem("squares",this.state.squares.map((function(e){return e.join(",")})).join(","))}},{key:"handleLoadSquares",value:function(){var e,t=null===(e=localStorage.getItem("squares"))||void 0===e?void 0:e.split(",");if(null!=t){var n=Array(9).fill(null).map((function(e,n){return t.slice(9*n,9*(n+1))}));this.setState((function(e){return{squares:n}})),this.clearHistory("\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f")}}},{key:"handleClearSquares",value:function(){this.setState((function(e){return{squares:Array(9).fill(null).map((function(e){return Array(9).fill(null)}))}})),this.clearHistory()}},{key:"updateCandidatesList",value:function(e){var t;t=e>5?x(C(p(this.state.squares))).map((function(e){return e.map((function(e){return null!=e.value?e.value.toString():e.candidates.join("")}))})):O(x(C(p(this.state.squares)))).map((function(e){return e.map((function(e){return null!=e.value?e.value.toString():e.candidates.join("")}))})),console.log(t),this.setState((function(e){return{candidatesList:t}}))}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"game",children:[Object(v.jsx)(b,{squares:this.state.squares,onClick:function(t,n){return e.handleClick(t,n)}}),Object(v.jsx)(w,{selectValue:this.state.selectValue,onClick:function(t){return e.handleSelect(t)}}),Object(v.jsx)(S,{predictText:this.state.predictText,onClick:function(){return e.handleNextPrediction()}}),Object(v.jsxs)("div",{className:"button-row",children:[Object(v.jsx)(g,{onClick:function(){return e.handleSaveSquares()}}),Object(v.jsx)(N,{onClick:function(){return e.handleLoadSquares()}}),Object(v.jsx)(q,{onClick:function(){return e.handleClearSquares()}})]}),Object(v.jsx)(A,{history:this.state.history}),Object(v.jsxs)("div",{className:"candidates",children:["\u5019\u88dc\u30d3\u30e5\u30fc\uff085\u5217\u76ee\u3088\u308a\u4e0a\u3092\u30af\u30ea\u30c3\u30af\u3067\u91cd\u8907\u6392\u9664\u5024\u63a8\u5b9a\u7d50\u679c\uff09",Object(v.jsx)(b,{squares:this.state.candidatesList,onClick:function(t,n){return e.updateCandidatesList(t)}})]})]})}}]),n}(d.a.Component);h.a.render(Object(v.jsx)(E,{}),document.getElementById("root"))},20:function(e,t,n){}},[[15,1,2]]]);
//# sourceMappingURL=main.0c8141ca.chunk.js.map